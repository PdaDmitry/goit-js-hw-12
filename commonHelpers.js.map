{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// export class ImageServer {\n//   constructor() {\n//     // this.q = q;\n//     this.KEY = '42263617-81d7156b9f7b88cd7b1016c2a';\n//     // this.URL = `https://pixabay.com/api/?key=${this.KEY}&q=${q}&image_type=photo&orientation=horizontal&safesearch=true`;\n//   }\n\n//   getImages(value) {\n//     const url = `https://pixabay.com/api/?key=${this.KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true`;\n//     return fetch(url).then(response => {\n//       if (response.ok) {\n//         return response.json();\n//       } else {\n//         throw new Error(response.status);\n//       }\n//     });\n//   }\n// }\nimport axios from 'axios';\n\nexport class ImageServer {\n  #pageSize = 15;\n\n  total_pages = 1;\n  constructor() {\n    this.KEY = '42263617-81d7156b9f7b88cd7b1016c2a';\n  }\n\n  async getImages(value) {\n    const url = `https://pixabay.com/api/?key=${this.KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    try {\n      const response = await axios.get(url);\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response.status);\n    }\n  }\n\n  get pageSize() {\n    return this.#pageSize;\n  }\n}\n","export function createGalleryMarkup() {\n  return `\n  <div class=\"container\">\n   <form class=\"form\">\n    <input class=\"input\" type=\"text\" name=\"picture\" placeholder=\"Search images...\" />\n    <button class=\"btn-search\" type=\"submit\">Search</button>\n  </form>\n  <span class=\"loader\">Loading images, please wait...</span>\n  <ul class=\"gallery\"></ul>\n  <div class=\"cont-load\">\n  <button class=\"btn-load btn-search\" type=\"submit\">Load more</button>\n  <span class=\"loader second-load\" data-loader>Loading images, please wait...</span>\n  </div>\n  </div>`;\n}\n\nexport function renderListGallery(images) {\n  const item = images\n    .map(el => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = el;\n      return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      data-source=\"${largeImageURL}\"\n      alt=\"\"\n      title=\"${tags}\"\n    />\n    <ul class=\"image-info\">\n      <li class=\"info-item\">\n        <span class=\"info-item\">Likes</span>\n        <span class=\"item-quantity\">${likes}</span>\n      </li>\n       <li class=\"info-item\">\n        <span class=\"info-item\">Views</span>\n        <span class=\"item-quantity\">${views}</span>\n      </li>\n       <li class=\"info-item\">\n        <span class=\"info-item\">Comments</span>\n        <span class=\"item-quantity\">${comments}</span>\n      </li>\n       <li class=\"info-item\">\n        <span class=\"info-item\">Downloads</span>\n        <span class=\"item-quantity\">${downloads}</span>\n      </li>\n    </ul>\n  </a>\n  </li>`;\n    })\n    .join('\\n\\n');\n\n  return item;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// import axios from 'axios';\n\nimport { ImageServer } from './js/pixabay-api';\nimport { createGalleryMarkup, renderListGallery } from './js/render-functions'; //renderListGallery\n\nconst galleryMarkup = createGalleryMarkup();\n\nconst body = document.querySelector('body');\nbody.insertAdjacentHTML('afterbegin', galleryMarkup);\n\nconst formEl = document.querySelector('form');\n\nconst loader = document.querySelector('.loader');\nloader.classList.add('is-hidden');\n\nconst loaderSecond = document.querySelector('[data-loader]');\nloaderSecond.classList.add('is-hidden');\n\nconst gallery = document.querySelector('.gallery');\n\nconst input = document.querySelector('input');\n\nconst button = document.querySelector('button');\n\nconst btnLoad = document.querySelector('.btn-load');\nbtnLoad.classList.add('is-hidden');\n\nconst images = new ImageServer();\nconst show = new SimpleLightbox('.gallery a');\n\nfunction showIziToast(text) {\n  return iziToast.show({\n    message: text,\n    messageSize: '16px',\n    messageWeight: '400',\n    backgroundColor: '#ef4040',\n    messageColor: '#fff',\n    position: 'topRight',\n    iconUrl: './img/error.svg',\n  });\n}\n\nlet page = 1;\nlet total_pages;\nlet q;\n\nformEl.addEventListener('submit', async e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n\n  q = e.target.elements.picture.value.trim();\n  if (!q) {\n    e.target.reset();\n    btnLoad.classList.add('is-hidden');\n    showIziToast('The form field must be filled in!');\n    return;\n  }\n  // console.log(images.pageSize);\n  // loader.classList.remove('is-hidden');\n\n  images\n    .getImages(q)\n    .then(data => {\n      if (data.hits.length === 0) {\n        btnLoad.classList.add('is-hidden');\n        showIziToast(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      } else {\n        console.log(data.hits);\n        const galleryHtml = renderListGallery(data.hits);\n        gallery.innerHTML = galleryHtml;\n        btnLoad.classList.remove('is-hidden');\n\n        show.refresh();\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      loader.classList.add('is-hidden');\n      e.target.reset();\n    });\n});\n\n// btnLoad.addEventListener();\n"],"names":["ImageServer","__privateAdd","_pageSize","__publicField","value","url","axios","error","__privateGet","createGalleryMarkup","renderListGallery","images","el","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryMarkup","body","formEl","loader","loaderSecond","gallery","btnLoad","show","SimpleLightbox","showIziToast","text","iziToast","q","e","data","galleryHtml"],"mappings":"urCAoBO,MAAMA,CAAY,CAIvB,aAAc,CAHdC,EAAA,KAAAC,EAAY,IAEZC,EAAA,mBAAc,GAEZ,KAAK,IAAM,oCACZ,CAED,MAAM,UAAUC,EAAO,CACrB,MAAMC,EAAM,gCAAgC,KAAK,GAAG,MAAMD,CAAK,2DAE/D,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACF,CAED,IAAI,UAAW,CACb,OAAOC,EAAA,KAAKN,EACb,CACH,CArBEA,EAAA,YCrBK,SAASO,GAAsB,CACpC,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAaT,CAEO,SAASC,EAAkBC,EAAQ,CA4CxC,OA3CaA,EACV,IAAIC,GAAM,CACT,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,kCACqBE,CAAa;AAAA;AAAA;AAAA,aAGlCD,CAAY;AAAA,qBACJC,CAAa;AAAA;AAAA,eAEnBC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sCAKmBC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,QAK/C,CAAK,EACA,KAAK;AAAA;AAAA,CAAM,CAGhB,CClDA,MAAMC,EAAgBX,EAAmB,EAEnCY,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,mBAAmB,aAAcD,CAAa,EAEnD,MAAME,EAAS,SAAS,cAAc,MAAM,EAEtCC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,UAAU,IAAI,WAAW,EAEhC,MAAMC,EAAe,SAAS,cAAc,eAAe,EAC3DA,EAAa,UAAU,IAAI,WAAW,EAEtC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEnC,SAAS,cAAc,OAAO,EAE7B,SAAS,cAAc,QAAQ,EAE9C,MAAMC,EAAU,SAAS,cAAc,WAAW,EAClDA,EAAQ,UAAU,IAAI,WAAW,EAEjC,MAAMf,EAAS,IAAIX,EACb2B,EAAO,IAAIC,EAAe,YAAY,EAE5C,SAASC,EAAaC,EAAM,CAC1B,OAAOC,EAAS,KAAK,CACnB,QAASD,EACT,YAAa,OACb,cAAe,MACf,gBAAiB,UACjB,aAAc,OACd,SAAU,WACV,QAAS,iBACb,CAAG,CACH,CAIA,IAAIE,EAEJV,EAAO,iBAAiB,SAAU,MAAMW,GAAK,CAK3C,GAJAA,EAAE,eAAc,EAChBR,EAAQ,UAAY,GAEpBO,EAAIC,EAAE,OAAO,SAAS,QAAQ,MAAM,OAChC,CAACD,EAAG,CACNC,EAAE,OAAO,QACTP,EAAQ,UAAU,IAAI,WAAW,EACjCG,EAAa,mCAAmC,EAChD,MACD,CAIDlB,EACG,UAAUqB,CAAC,EACX,KAAKE,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EACvBR,EAAQ,UAAU,IAAI,WAAW,EACjCG,EACE,0EACV,MACa,CACL,QAAQ,IAAIK,EAAK,IAAI,EACrB,MAAMC,EAAczB,EAAkBwB,EAAK,IAAI,EAC/CT,EAAQ,UAAYU,EACpBT,EAAQ,UAAU,OAAO,WAAW,EAEpCC,EAAK,QAAO,CACb,CACP,CAAK,EACA,MAAMpB,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbgB,EAAO,UAAU,IAAI,WAAW,EAChCU,EAAE,OAAO,OACf,CAAK,CACL,CAAC"}